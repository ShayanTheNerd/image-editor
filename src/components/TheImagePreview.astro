---
const { DEV, BASE_URL: baseURL } = import.meta.env;
const placeholderImgURL = `${DEV ? baseURL.slice(1) : baseURL}/img-placeholder.webp`;
---

<figure
	id="img_drop_zone"
	class="order-1 flex h-52 min-h-full items-center justify-center overflow-hidden rounded border-2 border-gray-400 bg-none shadow-inner shadow-gray-400 md:order-2 md:col-span-8">
	<img src={placeholderImgURL} alt="Placeholder" height="408" title="" id="selected_img" class="h-full object-cover" />
</figure>

<style>
	img {
		/* prettier-ignore */
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1), filter 0s;
	}
</style>

<script>
	import { DOMElements } from '@ts/app.ts';
	import autoAnimate from '@formkit/auto-animate';
	import renderImg from '@ts/modules/renderImg.mts';

	const { imgDropZone, imgSelectInput } = DOMElements;
	autoAnimate(imgDropZone, { disrespectUserMotionPreference: true });
	imgDropZone.addEventListener('click', () => imgSelectInput.click());
	['dragover', 'drop'].forEach(event => imgDropZone.addEventListener(event, catchAndRenderImg));

	function catchAndRenderImg(event: DragEvent) {
		event.preventDefault();
		renderImg(event.dataTransfer.files[0]);
	}
</script>
