---
const { DEV, BASE_URL: baseURL } = import.meta.env;
const placeholderImgURL = `${DEV ? baseURL.slice(1) : baseURL}/images/img-placeholder.webp`;
---

<figure
	id="img_drop_zone"
	class="order-1 flex h-52 min-h-full items-center justify-center overflow-hidden rounded border-2 border-gray-400 bg-none shadow-inner shadow-gray-400 transition-all duration-300 md:order-2 md:col-span-8">
	<img
		src={placeholderImgURL}
		alt="Placeholder image"
		height="408"
		title=""
		id="selected_img"
		class="h-full object-cover transition-all duration-300"
	/>
</figure>

<script>
	import { DOMElements } from '@ts/app.ts';
	import autoAnimate from '@formkit/auto-animate';
	import renderImg from '@ts/modules/renderImg.mts';

	const { imgDropZone } = DOMElements;
	autoAnimate(imgDropZone, { disrespectUserMotionPreference: true });
	['dragover', 'drop'].forEach(event => imgDropZone.addEventListener(event, catchAndRenderImg));

	function catchAndRenderImg(event: DragEvent) {
		event.preventDefault();
		renderImg(event.dataTransfer.files[0]);
	}
</script>
